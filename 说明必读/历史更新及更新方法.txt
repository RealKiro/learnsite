◆ LearnSite信息学习平台1.5.0.0版  (asp.net2.0)

（版本号以数据库变动为基准，版本号不变就是数据库结构不变）
--------------------------------------------------------
◇ 安全措施： 备份数据库、备份web.config、website.xml
--------------------------------------------------------
◇ 同个版本更新方法：

将新平台包解压后，除web.config和website.xml外，其他全部覆盖即可
--------------------------------------------------------
◇ 低版本升级更新方法：

1、首先按上面同版本更新方法；再对照一下website.xml有无新增参数

2、执行根目录下的 http://服务器IP/UpGrade.aspx页面 升级数据库
--------------------------------------------------------

◇ 指定版本更新方法：

  覆盖student、teacher 、bin、images目录，对照web.config修改增加上传大小限制

============================================================================================================

网站根目录增加index.html，可以使用js设置http或https跳转，方便人工智能教学，同时IIS里同时配置http和https
首先使用openssl生成pfx数字证书，然后在IIS里添加服务器证书，再在网站绑定里添加https时选择证书即可

============================================================================================================

特别提醒：
1、Office文档使用weboffice在线浏览只能在IE下使用（且website.xml里参数 <add key="OfficePng" value="False" />）
2、Scratch和Python在线编程则需要chrome浏览器86版本或以上
3、IIS里的mime类型添加扩展名.sb3 .py .woff2 woff .mp4 .ogg .svg .mpptx .bin .
4、如果是360浏览器,则需要使用极速模式进行积木和python编程
5、默认教师平台管理员账号admin密码12345
6、更新后，哪个页面出错，先查一下该页面是否已覆盖更新，再查Log目录有无出错日志，再在服务器上浏览反馈出错信息
7、服务器为win2008则数据库应该安装sql2008express或以上，
如果为win2019则数据库应该安装sql2012express或以上，安装时采用混合模式安装并设置sa账号密码
8、应用程序池选择.net2.0经典r
9、学案包只能是当前版本的学习网站才可以打包导出和导入，否则会因为缺少数据表字段出错
10、服务器防火墙入站允许放行端口添加deepseek使用2000端口、 mqtt使用5000和1883端口、luckysheet使用8180端口
=========================================================================================

◇ 更新历史记录：


2026.1.5   数据库更新修正
2025.12.30 修正思维导图km实例加载
2025.12.3  作品展示页面已得分作品一键已评修正为通用。增加组员退组按钮。
2025.11.21 修正网页课件上传路径，调整学案模板去除横幅。学案页面增加人工智能对话小窗口，调整小组聊天窗口。
2025.11.17 增加网页课件用iframe嵌入页面，方便交互网页课件的使用，同时可以将交互结果数据提交给平台记录成绩。
将以下两行代码放置在交互网页的提交按钮事件里：
  			const message = { name: "标签游戏", value: score };				
			window.parent.postMessage(JSON.stringify(message), "*");// 向父页面发送消息标题和score成绩

2025.11.7 增加网站在线制作页面，可在线设计html页面和拖放素材，比原来单页面制作方便,可在线设计制作多个页面。
增加上传进度条和上传文件过大提示。
2025.11.1  保留在线文件管理数据库管理页面，使用文件系统直读，方便文件夹重命名
2025.10.31 增加信息科技素材库在线文件管理页面，方便素材收集和网页制作准备

-----------------------------------LearnSite信息技术学习平台1.5.0.0版-------------------------------

2025.9.19 调整在线网页设计页面样式，使用iframe预览页面

2025.6.26 修改mqtt物联网页面css

2025.5.22 老师上课页面，增加填表任务完成统计

2025.5.6 文生图调用开源pollinations.ai接口生成，服务器IP限制速度估计10秒每张

2025.4.16 图片预览去除验证，jpg和png格式提交类型相互兼容；如果同一网段，学号查询里显示头像，否则不显示。

2025.4.1  嵌入网页修正

2025.3.27 手写数字模型训练改进内存占用。

2025.3.25  deepseek对话改用流式，改进对话markdown格式支持

2025.3.22  更新pptist，增加AI生成功能

2025.3.18  增加嵌入百度图片网页，提交作品类型为psd图片格式

2025.3.2   增加Markdown写作页面

2025.2.26  增加手写数字识别体验页面

2025.2.24  增加声音分析页面，mfcc特征获取不准；增加井字棋页面

2025.2.22  增加文字识别体验页面，采用PaddleOCR库

2025.2.20  增加语音合成体验页面，采用edge-tts库

2025.2.12  增加人工智能对话页面，将deepseek和智谱ai用python实现代理服务，供学生体验，并发性能要待课堂检验。

2025.1.16  mqtt服务调整为不验证账号密码连接，方便学习物联网

2025.1.8   自动获取服务器ip

2025.1.5   图像分类增加手写输入分类，模型预览修正

-----------------------------------LearnSite信息技术学习平台1.3.6.3版-------------------------------

2024.12.31 去除陷阱，背景音乐调整，网页设计页面调整

2024.12.27 添加推箱子地图设计（数据与编码）（增加了陷阱）

2024.12.1  启用flash开源插件

2024.11.29 网页设计页面和空间调整

2024.11-20  课堂内调查测验页面重新设计，更简洁;物联网设备学案页面可选择勾选。

2024.11.7-8 网页设计页面和空间便利调整，增加撤销和重做，去除打印线，禁止拖放内容

2024.11.5-6 pptist增加更多中文设计字体以及音视频上传功能，增加视频封面获取

2024.11.3  pptist添加网页缓存，防止意外关闭页面时丢失作品内容，pptist缓存数据库名关联学号成功（使用cookie传递学号）

2024.11.1  将在线演示文稿更换为PPTist，可按几何形状裁剪图片

2024.10.18 增加Excalidraw画布，可手绘思维导图，增加中文字体

2024.10.12 使用js库预览docx、pptx、xlsx文档（除图片环绕和矢量图片有些错位，基本上可以使用）

2024.10.10 给网页设计增加缩略图

2024.9.27 修正在线填表组号问题，在线聊天窗口固定

2024.6.25 中文打字页面调整

2024.6.19 物联网页面增加数据采集图表，增加设备图标互动

2024.6.17 增加物联网mqtt页面，方便控制板与mqtt服务信息互动显示

2024.6.6  增加人脸识别页面（人脸检测、魔法表情、扫脸通过应用体验）

2024.5.23 增加机器学习——图像分类页面，在线保存分类模型，在线分享模型，生成分类封面缩略图

2024 5.17 修改表格宽度和单元格背景错误，调整讨论板样式，视频上传宽度问题修正

2024.5.13 讨论板编辑器增加图片上传，解除回复修改次数，讨论内容文字图片不可选择不可拖放,不能点赞自己

2024.5.9  增加图像风格迁移页面

2024.4.8  网盘支持拖放和点击上传

2024.3.30 在线word文档工具栏调整、预览页面调整

2024.3.22 限制IP登录修正，python绘图自动批改修正

2024.3.15 调整学号查询页面，首页登录提示姓名

2024.3.3  改进在线海报设计，增加背景图片

2024.2.29 增加在线海报设计

2024.2.27 试题包目录不存在则自动创建

2024.2.21 使用psd.js转换psd格式为png

2024.2.18 像素画二进制改十六进制压缩

2024.1.31 像素画缩略图gif动画生成

2024.1.24 像素画动画帧拖放排序

2024.1.21 像素画增加动画制作及播放

2024.1.15 增加在线演示文稿，图片上传自动压缩

2024.1.9 增加在线文档，图片上传自动压缩

2024.1.8 增加在线二维码设计

2024.1.3  调整html在线网页设计

2023.12.22 微调小问题

2023.12.5 增加AI五子棋赢棋排行榜

2023.11.15 在线协作作业预览，修正预览错误；在线网页设计增加查看学案，方便对照编写html代码

2023.10.31 增加网页制作空间及独立保存位置

2023.9.28 在线协作表格修改图标,推荐组长页面增加模拟学生任命或卸任组长功能

2023.9.27 修正小组ID为即时获取，模拟学生小组讨论显示组长和所有同学讨论内容，模拟学生点阅读任务已学标记为已学学案，在线协作表格微调

2023.9.3  在线表格luckysheet协作编辑，加载表格实例

2023.8.16 增加后台Mqtt服务,增加物联网和人工智能页面

2023.8.7 在线聊天增加更多表情符号

2023.8.5 在线聊天编辑器修改为可视化（直接显示表情符），并增加发送图片和附件功能(使用fcup.js上传)

2023.8.2 增加组内在线讨论窗口（体验简单在线交流）

2023.7.30 增加我的网盘增加公共资源(老师使用模拟学生上传）

2023.7.27 个人资料里去除个人信息页面，修改为组长推荐页面

2023.7.22 在线填表增加小组内协作填写功能

2023.7.17 增加luckysheet在线电子表格类型

2023.7.15 修正在线填表（只获取表格内容并显示）

-----------------------------------LearnSite信息技术学习平台1.3.6.0版-------------------------------
2023.7.14 修正并改进在线网页编辑器

2023.7.13 流程图mxgraph增加拓扑图实物图标

2023.7.12 在线填表改进（kindeditor去除原来单行和多行插入，修改为表格单元格右键弹出单元格属性里设置可编辑状态，使表格更美观简洁）

2023.7.9 增加在线思维导图保存

2023.7.1 打字宝典页面禁止拖放文本

2023.6.9  python在线编程如果作品IP与登录IP一致则显示保存过的代码，否则为空；
如果程序检测通过，则后续修改不再保存，同时更新作品IP为当前IP;如果程序检测不通过则不更新IP；程序运行正常才能保存，否则无法保存
=================================================================================================================

2023.6.7  学生首页已学学案任务状态图示问题修正，python在线编程界面颜色切换和学案显示隐藏

2023.5.28 python绘图画布显示效果图痕迹,学生首页已学学案任务状态图示顺序修正

2023.5.25 学生平台已学学案显示任务完成情况图

2023.5.22 python绘图自动批改特征数据调整（教师平台python自动批改需重新运行保存，生成新的特征数据）

2023.5.19 作品缩略图生成修正（图片浏览时无法更新）

2023.5.18 作品展示页面增加一键未评

2023.5.16 积木编程学案显示位置调整，python编程绘图颜色批改修正，学案导入问题修正

2023.4.28 账号限制登录时，开始页面显示全体下线按钮；修正课堂测验填空题不批改

2023.4.17 修正linux下调查不显示问题

2023.4.15 在线表单可以重复提交，但查看限制为组内，如果未分组只能查看自己（模拟学生账号可以查全班）,常识积累修正linux下错误,讨论板按小组排序，显示组长和组员图标
增加学生自动分组功能（根据小组限制人数计算组长人数，取积分高的学生为组长，组员依次分配）

2023.4.11 修改office转图片为转pdf预览（可以支持3页转换，图片只支持一页）

2023.4.9  教师平台可自定义初始化学生密码

2023.4.8  课堂测验选项重复出错修正,学案导航修正居中,psd格式作品预览输出修正（压缩大小尺寸），
学案导入失败处理（记录到log目录日志里）,解除上传文件过大出错（web.config文件增加<system.webServer>参数）

2023.4.5  填表活动只允许提交一次，组长活动页面出错修正，学习进度页面用颜色浓淡表示作品完成速度，
学生网盘去文件类型限制（文件过大无法上传且不会提示）（讨论板帖子7天之后过期，无法继续点赞！）

2023.3.30 课堂测验增加填空题类型

2023.3.27 增加课堂活动记录表MenuWorks，调整学生平台页面和横幅尺寸，课堂活动添加闯关模式（活动完成后依次解锁下一个活动）
		  阅读活动页面，增加已阅读按钮，点击后完成阅读学习并记录

-----------------------------------LearnSite信息技术学习平台1.3.5.2版-------------------------------

2023.3.16 模拟学生意外出错修正

2023.2.27 头像相片类型增加jpeg,png，缩略图统一为jpg格式

2023.2.20 表单打分采用异步无刷新

2023.2.19 更新页面增加数据库为空判断，如果为空，可以在线执行数据库脚本创建数据表
linux下pythonblockly积木编程缩略图生成问题修正

2023.2.16 自动批改添加页面保存时无代码则删除原来的自动批改代码,撤消自动批改。

2023.2.7  学号查询，头像显示问题修正(头像生成高清缩略图)

2023.2.5  增加pdf作品浏览

2023.1.30  增加python blockly积木编程（方便海龟绘图），增加学案个性化横幅设置
-----------------------------------LearnSite信息技术学习平台1.3.3.9版-------------------------------

2022.12.16 python测评脚本修正，学案包导入修正

2022.12.1  学案发布隐藏菜单同步问题修正

2022.11.25 修正一些小问题（自动批改页面、拼图编程积木重叠、旧版学案导入问题），推箱子增加排行榜

2022.11.18 增加python拼图编程页面（正确的完整代码从自动批改处读取,然后生成代码积木方块并随机摆放，学生拼图生成的代码跟正确代码对比，实现自动批改）

2022.11.11 python在线编程页面提示帮助栏调整（增加绘图帮助字段控制帮助菜单内容，上方增加运行按钮），学生平台作品收藏代码浏览修正等，
流程图增加颜色、流程图保存后读取修正(二次加密，二次解密)，作品展播评价未评筛选完成时刷新出错修正

-----------------------------------LearnSite信息技术学习平台1.3.3.8版-------------------------------

2022.10.21 上课页面学案快速发布时同步刷新导航栏目，讨论板换行修正，测评编辑窗口调整

2022.10.9 消除旧版学案导入Jmid字段缺失出错，学期查询页面取消班级限制，
python测评成绩统计修正，上课页面显示本课活动导航（可以直接发布或隐藏课堂活动），测评标题更换为kindeditor编辑器
学生讨论板页面采用异步刷新

2022.9.23 学生申请小组页面列表增加增加显示小组名称

2022.9.20 python测评标题引号乱码问题修正，页面标题显示学生姓名，模拟学生id修正（增加入学年份)

2022.6.20 增加了一个有关算法数据结构的静态页面

2022.6.15 学案活动增加html在线编辑支持页面（方便学生体验html语法)

2022.6.6 python绘图编程更换颜色选择，调整语句提示栏

2022.6.1  python绘图编程自动批改修正、编程帮助栏增加颜色选择器，学案活动显示和隐藏时不暂停任务。

2022.5.19  流程图学案编辑问题修正

2022.04.28 修正python绘图自动批改小问题，txt文本显示修正

2022.04.19 修正一些小问题(积木编程继承作品问题、python绘图批改提示)

2022.04.18 修正一些小问题(常识测验查看答案、python绘图批改修正、首页查询sql注入修正)

2022.04.05 增加Jthumb字段存放缩略图

2022.03.23 python编程两种模式界面调整一致

2022.03.22 修正linux下路径
-----------------------------------LearnSite信息技术学习平台1.3.3.6版-------------------------------

2022.03.14 使用汉字转拼音NPinyin库

2022.03.12 修正linux下发现的新问题

2022.03.11 改进idle交互式环境代码运行提示和使用习惯

2022.03.09 双界面互换，辅助输入开灯亮色，绘图辅助批改增加兼容范围值

2022.03.07 修正linux下路径和大小写问题（感谢顾老师花费大量时间进行配置和寻找修正办法)

2022.02.25 增加python绘图编程页面（方便收藏），python编程修改海龟背景为步进绘图模式选择

2022.02.13 python在线编程界面和检验修改调整，自动批改增加海龟绘图特征字段（根据图片尺寸判断长x宽x斜x斜x点x点x颜色），增加绘图背景网格

-----------------------------------LearnSite信息技术学习平台1.3.3.5版-------------------------------