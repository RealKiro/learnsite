<!DOCTYPE html>
<!--
Copyright 2018 Reiichiro Nakano All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
==============================================================================
-->
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>任意图像风格迁移</title>

    <!-- Bootstrap core CSS -->
    <link href="../../ai/bootstrap.min.css" rel="stylesheet">
<script src="../../ai/bundle.js"></script>
</head>

<style>
.centered {
  margin: auto;    
  display: block;
}
</style>

<body>
<input type="file" id="file-select" style="display: none" accept="image/x-png,image/gif,image/jpeg"/>
<!-- As a heading -->
<div  style="text-align: center; ">
    <div class="container">
      <h2>任意图像风格迁移</h2>
    </div>
  </div>
<div class="">
<div id="mobile-warning" hidden class="alert alert-warning" role="alert">
</div>
<ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="stylize-tab" data-toggle="tab" href="#stylize" role="tab" aria-controls="stylize" aria-selected="true">选择一张图像</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="combine-tab" data-toggle="tab" href="#combine" role="tab" aria-controls="combine" aria-selected="false">组合两种风格</a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="stylize" role="tabpanel" aria-labelledby="stylize-tab">
      <div class="container">
        <div class="row my-2">
          <div class="col mx-6">
              <img id="content-img" class="centered" src="images/chicago.jpg" height=200></img>
              <br>
              <label for="content-img-size">图像尺寸</label>
              <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
              title="A bigger content image results in a more detailed output, but increases the processing time significantly."></i>
              <input type="range" min="64" max="256" value="200" class="custom-range centered" id="content-img-size" >
              <br>
              <select id="content-select" class="centered custom-select">
                <option value="" disabled>选择图像</option>
                <option value="pic">拍照</option>
                <option value="file">从文件中选择</option>
                <option value="stata">stata</option>
                <option value="diana">diana</option>
                <option value="golden_gate">golden_gate</option>
                <option value="beach">beach</option>
                <option value="chicago" selected="selected">chicago</option>
                <option value="statue_of_liberty">statue_of_liberty</option>
              </select>
          </div>
          <div class="col mx-6">
              <img id="style-img" class="centered" crossorigin="anonymous" src="images/seaport.jpg" height=200></img>
              <br>
              <label for="style-img-size">风格图像尺寸</label>
              <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
              title='Changing the size of a style image usually affects the texture "seen" by the network.'></i>
              <input id="style-img-square" type="checkbox" style="vertical-align: middle; float: right;"
              data-toggle="tooltip" data-placement="top" 
              title="Force image to square">
              <input type="range" min="64" max="256" value="200" class="custom-range centered" id="style-img-size">
              <br>
              <select id="style-select" class="centered custom-select">
                <option value="" disabled>选择风格</option>
                <option value="file">从文件中选择</option>
                <option value="udnie">udnie</option>
                <option value="stripes">stripes</option>
                <option value="bricks">bricks</option>
                <option value="clouds">clouds</option>
                <option value="towers">towers</option>
                <option value="sketch">sketch</option>
                <option value="seaport" selected="selected">seaport</option>
                <option value="red_circles">red_circles</option>
                <option value="zigzag">zigzag</option>
              </select>
          </div>
        </div>
        <div class="row my-4">
          <div class="col-md-6 offset-md-3">
            <canvas id="stylized" class="centered"></canvas>
            <br>
            <label for="stylized-img-ratio">风格化强度</label>
            <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
            title="This parameter affects the stylization strength. The further to the right, the stronger the stylization. This is done via interpolation between the style vectors of the content and style images."></i>
            <input type="range" min="0" max="100" value="100" class="custom-range centered" id="stylized-img-ratio">
          </div>
        </div>
        <div class="row my-4">
          <div class="col-md-5 offset-md-3">
              <button disabled id="style-button" type="button" class="btn btn-primary btn-block">加载风格模型，请稍等...</button>
          </div>
          <div class="col-md-1">
              <button type="button" id="randomize" class="btn btn-light btn-block">
                <i class="fas fa-random" data-toggle="tooltip" data-placement="top" 
                title="Randomize parameters"></i>
              </button>
          </div>
        </div>
      </div>
  </div>
  <div class="tab-pane fade" id="combine" role="tabpanel" aria-labelledby="combine-tab">
    <div class="container">
      <div class="row my-4">
        <div class="col mx-5 my-4">
            <img id="c-style-img-1" class="centered" crossorigin="anonymous" src="images/stripes.jpg" height=256></img>
            <br>
            <label for="c-style-img-1-size">风格A尺寸</label>
            <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
            title="Changing the size of a style image usually affects the texture "seen" by the network."></i>
            <input id="c-style-1-square" type="checkbox" style="vertical-align: middle; float: right;"
            data-toggle="tooltip" data-placement="top" 
            title="Force image to square">
            <input type="range" min="100" max="400" value="256" class="custom-range centered" id="c-style-img-1-size">
            <br>
            <select id="c-style-1-select" class="centered custom-select">
              <option value="" disabled>选择风格</option>
              <option value="file">从文件中选择</option>
              <option value="udnie">udnie</option>
              <option value="stripes" selected="selected">stripes</option>
              <option value="bricks">bricks</option>
              <option value="clouds">clouds</option>
              <option value="towers">towers</option>
              <option value="sketch">sketch</option>
              <option value="seaport">seaport</option>
              <option value="red_circles">red_circles</option>
              <option value="zigzag">zigzag</option>
            </select>
        </div>
        <div class="col mx-5 my-4">
            <img id="c-style-img-2" class="centered" crossorigin="anonymous" src="images/bricks.jpg" height=256></img>
            <br>
            <label for="c-style-img-2-size">风格B尺寸</label>
            <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
            title="Changing the size of a style image usually affects the texture "seen" by the network."></i>
            <input id="c-style-2-square" type="checkbox" style="vertical-align: middle; float: right;"
            data-toggle="tooltip" data-placement="top" 
            title="Force image to square">
            <input type="range" min="100" max="400" value="256" class="custom-range centered" id="c-style-img-2-size">
            <br>
            <select id="c-style-2-select" class="centered custom-select">
              <option value="" disabled>选择风格</option>
              <option value="file">从文件中选择</option>
              <option value="udnie">udnie</option>
              <option value="stripes">stripes</option>
              <option value="bricks" selected="selected">bricks</option>
              <option value="clouds">clouds</option>
              <option value="towers">towers</option>
              <option value="sketch">sketch</option>
              <option value="seaport">seaport</option>
              <option value="red_circles">red_circles</option>
              <option value="zigzag">zigzag</option>
            </select>
        </div>
      </div>
      <div class="row my-4">
        <div class="col-md-6 offset-md-3">
            <img id="c-content-img" class="centered" src="images/statue_of_liberty.jpg" height=256></img>
            <br>
            <label for="c-content-img-size">Content image size</label>
            <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
            title="A bigger content image results in a more detailed output, but increases the processing time significantly."></i>
            <input type="range" min="256" max="400" value="256" class="custom-range centered" id="c-content-img-size">
            <br>
            <select id="c-content-select" class="centered custom-select">
              <option value="" disabled>选择图像</option>
              <option value="pic">拍照</option>
              <option value="file">从文件中选择</option>
              <option value="stata">stata</option>
              <option value="diana">diana</option>
              <option value="golden_gate">golden_gate</option>
              <option value="beach">beach</option>
              <option value="chicago">chicago</option>
              <option value="statue_of_liberty" selected="selected">statue_of_liberty</option>
            </select>
        </div>
      </div>
      <div class="row my-4">
        <div class="col-md-6 offset-md-3">
            <canvas id="c-stylized" class="centered"></canvas>
            <br>
            <label for="c-stylized-img-ratio">风格化比率</label>
            <i class="far fa-question-circle" data-toggle="tooltip" data-placement="top" 
            title="This parameter affects the strength of the two styles relative to each other. This is done via interpolation between the style vectors of the two style images."></i>
            <input type="range" min="0" max="100" value="50" class="custom-range centered" id="c-stylized-img-ratio">
        </div>
      </div>
      <div class="row my-4">
        <div class="col-md-5 offset-md-3">
            <button disabled id="combine-button" type="button" class="btn btn-primary btn-block">加载风格模型，请稍等...</button>
        </div>
        <div class="col-md-1">
            <button type="button" id="c-randomize" class="btn btn-light btn-block">
              <i class="fas fa-random" data-toggle="tooltip" data-placement="top" 
              title="Randomize parameters"></i>
            </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row my-4">
    <div class="col-md-3 offset-md-3">
        <select disabled id="model-select-style" class="centered custom-select">
          <option value="mobilenet" selected="selected">[Fast] Distilled MobileNet style model (9.6MB)</option>
          <option value="inception">[High quality] Original Inceptionv3 style model (36.3MB)</option>
        </select>
    </div>
    <div class="col-md-3">
        <select disabled id="model-select-transformer" class="centered custom-select">
          <option value="separable" selected="selected">[Fast] Separable_conv2d transformer (2.4MB)</option>
          <option value="original">[High quality] Original transformer model (7.9MB)</option>
        </select>
    </div>
  </div>
</div>

<canvas id="hidden-canvas" style="display: none"></canvas>
<div class="modal fade" id="cam-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Take a snapshot!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <video id="webcam-video" class="centered" width="500" height="375"></video>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="snap-button">Snap!</button>
      </div>
    </div>
  </div>
</div>

  </div>
</div>
</div>

<!-- JQuery -->
<script type="text/javascript" src="../../ai/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="../../ai/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="../../ai/bootstrap.min.js"></script>

<script type="text/javascript">
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
  })
</script>
</body>
</html>
